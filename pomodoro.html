<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- $ Viewport meta för att göra så browsern inte försökar använda automatisk anpassning till mobil storlek $ -->
	<link rel="stylesheet" type="text/css" href="omar-shishani-2.css">
	<link rel="stylesheet" media="(max-width: 450px)" href="max-450px.css">
  <script src="jquery-3.4.1.js"></script>
  <script
  src="https://code.jquery.com/jquery-3.5.1.js"
  integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
  crossorigin="anonymous"></script>
	<link href="https://fonts.googleapis.com/css?family=Comfortaa&display=swap" rel="stylesheet">
  <title>Omar Shishani</title>
  <script>
    let star_fall_distance = '150vh';
    $(document).ready(
      function(){
        $(".timer__button").click(
          function timer(){
            $(".text-main--timer").css('display', 'block');
            let hours = $(".timer__hours-input").val();
            let minutes = $(".timer__minutes-input").val();
            let seconds = $(".timer__seconds-input").val();
            if (hours == "") {hours = 0;};
            if (minutes == "") {minutes = 0;};
            if (seconds == "") {seconds = 0;};
            let timeRemaining = `<span class="timer__span--values">${hours}</span> hours, <span class="timer__span--values">${minutes}</span> minutes, <span class="timer__span--values">${seconds}</span> seconds`;
            $(".timer__display-text").html(timeRemaining);  
            let timer_sec = setInterval(function(){
              timeRemaining = `<span class="timer__span--values">${hours}</span> hours, <span class="timer__span--values">${minutes}</span> minutes, <span class="timer__span--values">${seconds}</span> seconds`;
              $(".timer__display-text").html(timeRemaining);  
              if (hours >= 1 && minutes >= 1 && seconds <= 0) {
                minutes--;
                seconds = 59;
                $(".timer__display-text").html(timeRemaining);  
              } else if (hours >= 1 && minutes <= 0 && seconds <= 0) {
                hours--;
                minutes = 59; 
                seconds = 59; 
                $(".timer__display-text").html(timeRemaining); 
              }
              else if (minutes >= 1 && seconds <= 0) {
                minutes--;
                seconds = 59;
                $(".timer__display-text").html(timeRemaining);  
              } else if (minutes >= 1 && seconds >= 0) {
                seconds--;
                $(".timer__display-text").html(timeRemaining);  
              } else if (minutes <= 1 && seconds > 0) {
                seconds--;
                $(".timer__display-text").html(timeRemaining);  
              } else if (seconds <= 0) {
                clearInterval(timer_sec);
                $(".timer__display-text").html(`${timeRemaining}: <span class="timer__span--values">Timer Complete!</span>`);
                newStar();
                audio_tequila.play();
                airhorn.play();
                $('.timer__star').toggleClass('timer__star--rotate');
                $('.timer__star').animate({
                  top: `${star_fall_distance}`
                }, 7000);  
              } 
              //Make an 'if' so that minutes decreases every time seconds goes to 0, but minutes is still 1 or greater.
            }, 1000);
          }
        )
      }
    );
  </script>
</head>
	<body class="body body--construction">
		<header id="page-top" class="header header--contracting">
		<!-- $ Elementet <header> används för bättre semantik $ -->
			<h1 class="header__heading">
				Timer
			</h1>
		</header>

		<main class="main">
      <svg class="timer__star" width="30" height="30" version="1.1" viewBox="0 0 7.9375 7.9375" xmlns="http://www.w3.org/2000/svg">
       <g transform="translate(0 -289.06)">
        <path d="m6.8304 296.28c0.029171-0.0264-2.5116-0.97159-2.4724-0.97584 0.039143-4e-3 -2.2397 1.4639-2.2055 1.4835 0.034165 0.0196 0.14792-2.6889 0.16406-2.653 0.016136 0.0359-2.0844-1.6777-2.0924-1.6392-0.008056 0.0385 2.603-0.69022 2.5738-0.66378-0.029171 0.0265 0.95147-2.5008 0.91233-2.4966-0.039143 4e-3 1.4608 2.2623 1.4266 2.2427-0.034165-0.0196 2.6724 0.13212 2.6563 0.0962-0.016136-0.0359-1.7002 2.0884-1.6921 2.0499 0.00806-0.0385 0.70018 2.5824 0.72935 2.556z" fill="#fc0" stroke="#000" stroke-width=".16008"/>
       </g>
      </svg>
			<div class="main__section-construction-padded">
				<div class="text-main">
					<h2 class="text-main__title">
						Timer
					</h2>
					<div class="text-main__content">
            <div>
              <h3 class="timer__titles">Hours</h3>
              <input class="timer__input timer__hours-input" type="number">
            </div>
            <div>
              <h3 class="timer__titles">Minutes</h3>
              <input class="timer__input timer__minutes-input" type="number">
            </div>
            <div>
              <h3 class="timer__titles">Seconds</h3>
              <input class="timer__input timer__seconds-input" type="number">
            </div>
            
            <button class="timer__button">Start Timer</button>
					</div>
        </div>			
        
        <div class="text-main text-main--2 text-main--timer">
					<div class="text-main__content timer__display-text">
					</div>
				</div>

				<div class="text-main text-main--2">
					<div class="text-main__content">
						<img class="image--contracting" src="pictures/about-me-main.jpg" alt="Omar holding 2x4 in front of fence railing">
					</div>
				</div>
			
				</div>
				<a href="#page-top">
					<div class="navbar--contracting__button navbar--contracting__button--back-to-top">
						Back to top
					</div>
				</a>
			</div> <!-- <div class="main__section-construction-padded"></div> -->
			
			
		</main>
		<script src="insert-to-dom.js"></script>
		<script id="omarJavascript" src="omar-shishani-2.js"></script>
    <script src="construction-top-button.js"></script>
    <script>
      let audio_tequila = new Audio("audio/tequila.mp3");
      let airhorn = new Audio("audio/airhorn.mp3");
      function newStar(){
        let new_star_left;
        let star_num;
        let star_delay;
        let star_color;

        for (let i = 0; i <= 200; i++){
          new_star_left = Math.random()*97;
          animation_number = Math.ceil(Math.random()*4);
          star_delay = Math.random()*9000;
          star_color_random_id = Math.ceil(Math.random()*2);
          if (star_color_random_id === 1){
            star_color = `rgb(255, ${Math.round(Math.random()*255)}, 0)`;  
          } else {
            star_color = `rgb(255, 0, ${Math.round(Math.random()*255)})`;
          }
            
          $('.main').prepend(
            `<svg class="timer__star timer__star__${star_num} timer__star--rotate" style="animation: star_rotate_${animation_number} 20s forwards; left:${new_star_left}%" width="30" height="30" version="1.1" viewBox="0 0 7.9375 7.9375" xmlns="http://www.w3.org/2000/svg">
            <g transform="translate(0 -289.06)">
              <path d="m6.8304 296.28c0.029171-0.0264-2.5116-0.97159-2.4724-0.97584 0.039143-4e-3 -2.2397 1.4639-2.2055 1.4835 0.034165 0.0196 0.14792-2.6889 0.16406-2.653 0.016136 0.0359-2.0844-1.6777-2.0924-1.6392-0.008056 0.0385 2.603-0.69022 2.5738-0.66378-0.029171 0.0265 0.95147-2.5008 0.91233-2.4966-0.039143 4e-3 1.4608 2.2623 1.4266 2.2427-0.034165-0.0196 2.6724 0.13212 2.6563 0.0962-0.016136-0.0359-1.7002 2.0884-1.6921 2.0499 0.00806-0.0385 0.70018 2.5824 0.72935 2.556z" fill="${star_color}" stroke="#000" stroke-width=".16008"/>
            </g>
            </svg>`
          );
          $(`.timer__star__${star_num}`).delay(star_delay).animate({
            top: `${star_fall_distance}`
          }, 7000);
          (function () {
            setTimeout(function(){
              $(`.timer__star__${star_num}`).css('display', 'none');
            }, 7000);
          })();
          
        };

        
      };
    </script>
	</body>
</html>
